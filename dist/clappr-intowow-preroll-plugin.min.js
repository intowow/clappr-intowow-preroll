!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("clappr")):"function"==typeof define&&define.amd?define(["clappr"],t):"object"==typeof exports?exports.ClapprIntowowPrerollPlugin=t(require("clappr")):e.ClapprIntowowPrerollPlugin=t(e.Clappr)}(this,function(e){return function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mp4="data:video/mp4;base64, AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAGm1kYXQAAAGzABAHAAABthBgUYI9t+8AAAMNbW9vdgAAAGxtdmhkAAAAAMXMvvrFzL76AAAD6AAAACoAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE/////+/wAAAiF0cmFrAAAAXHRraGQAAAAPxcy++sXMvvoAAAABAAAAAAAAACoAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAgAAAAIAAAAAAG9bWRpYQAAACBtZGhkAAAAAMXMvvrFzL76AAAAGAAAAAEVxwAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABaG1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAShzdGJsAAAAxHN0c2QAAAAAAAAAAQAAALRtcDR2AAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAgACABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAXmVzZHMAAAAAA4CAgE0AAQAEgICAPyARAAAAAAMNQAAAAAAFgICALQAAAbABAAABtYkTAAABAAAAASAAxI2IAMUARAEUQwAAAbJMYXZjNTMuMzUuMAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAASAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYHVkdGEAAABYbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAraWxzdAAAACOpdG9vAAAAG2RhdGEAAAABAAAAAExhdmY1My4yMS4x",t.svg='data:image/svg+xml, <svg xmlns="http://www.w3.org/2000/svg" width="1" height="1" viewBox="0 0 1 1"><rect x="0" y="0" width="1" height="1" fill="#000000" /></svg>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=window,a=document,o=null,r=function(t){n.clearTimeout(o),"function"==typeof e&&e(t)};if(n.google&&n.google.ima)return void r(!0);var s=!0===t?"https:":"",A=a.getElementsByTagName("script")[0],l=a.createElement("script");l.src=s+"//imasdk.googleapis.com/js/sdkloader/ima3.js",l.async=!0,"function"==typeof e&&(l.onload=function(){r(!0)}),A.parentNode.insertBefore(l,A),i&&(o=n.setTimeout(function(){r(!1)},i))},e.exports=t.default},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1OWRlYjE3My0zYTI3LTRmNDctOGM0ZC1jMTE2NGEyYzgzY2QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkIzMjA5MzgwOTI5MTFFNjlGQTNEODZBNkNDMDlDNzAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkIzMjA5MzcwOTI5MTFFNjlGQTNEODZBNkNDMDlDNzAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NWQ0OTUzZS0yMGFkLTRhYzQtYjI2ZC1mMWRjZDkyYWQ4ZDAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTlkZWIxNzMtM2EyNy00ZjQ3LThjNGQtYzExNjRhMmM4M2NkIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/cTp2QAAAmdJREFUeNpiTEpKamBgYKhnoDNgNjQ0PACkGYHYgd4Wg2iKLefiYGdwsbdlkBIXZXj45BlB9SxI7AYoXU+qhfbWlgxeAUEMXFzccPFDJ04T5WMYINrnMB9m5eUz6BuZMPz+/ZvhwpnTDNKycgy/f/1kOHPuPNE+JtrndhamDN5+AQwi4hJg/rYN6xgOHjnKUN/UBOavWbuOpKAmaDm6hSCwcPYMcLAG+3qDg/rg7p0Mb95/IGgxEx45kOWN6IIgS9+8fMGwZtlihm/fvjKERseCHQSKY7Dvd+5CiY666iqwPKE4RgcocQ5KrbevXWbYuHkLw/XbdxmuXjzPYG1ry2BqYQUP8rMXL8MtLSkuZpBXUmYwMDZh+PDqOUpqJ2QxhuVv3n1g+P3nL1ji4+cvDAy/vjNo6eqDfT99xkywHLKlIACSAzkO5GiQfkJBTTDYQRY4OLvCffvtx08MS0FpYNrEfjA7ISmFqDgmaLm8jBQ4zkE+Onj0OFZLQQnv+p37DA/v3QWr1VRRJNlihrlz56JYDjIQZDjItyCAzVKMUOLkIt1ibJaDDAf5Fp+loFQNk3v99i15FmOzHBS3B/buhiekB48eo1gKynIgcPXSBYZHz16A2YzAapEUC1H4ycnJKFUqyJL41Ay4JTw8vHCfguK4p7cX7EiyfYwv2EHBDPK1tp4B3FKQI5AtpdjHuHwOSt0mBnoM3NzcDFev34AHLzIgyWIishvRVSoxJRexgKTGBDUtJslyaltMtOW0sJgoy2llMUHLaWkxXstpbTFOy+lhMVbL6WUxhuX0tBjFchYG+gNw0xkgwABZmxWRtEwx8AAAAABJRU5ErkJggg=="},function(e,t,i){t=e.exports=i(9)(!1),t.push([e.i,".intowow-preroll-plugin[data-preroll] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  text-align: left; }\n  .intowow-preroll-plugin[data-preroll] .preroll-container[data-preroll] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%; }\n    .intowow-preroll-plugin[data-preroll] .preroll-container[data-preroll] .ima-container[data-preroll] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%; }\n  .intowow-preroll-plugin[data-preroll] .preroll-overlay[data-preroll] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1337;\n    cursor: pointer;\n    overflow: hidden;\n    display: none; }\n    .intowow-preroll-plugin[data-preroll] .preroll-overlay[data-preroll]:hover .preroll-overlay-icon[data-preroll] {\n      opacity: 1; }\n    .intowow-preroll-plugin[data-preroll] .preroll-overlay[data-preroll] .preroll-overlay-icon[data-preroll] {\n      position: relative;\n      width: 100%;\n      height: 25%;\n      top: 50%;\n      transform: translateY(-50%);\n      opacity: 0.75; }\n",""])},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function r(){g&&h&&(g=!1,h.length?p=h.concat(p):_=-1,p.length&&s())}function s(){if(!g){var e=a(r);g=!0;for(var t=p.length;t;){for(h=p,p=[];++_<t;)h&&h[_].run();_=-1,t=p.length}h=null,g=!1,o(e)}}function A(e,t){this.fun=e,this.array=t}function l(){}var d,u,c=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var h,p=[],g=!1,_=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new A(e,t)),1!==p.length||g||a(s)},A.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t){e.exports='<svg version="1.1" id="svg-spinner" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 80 80" xml:space="preserve"><path id="spinner" fill="#D43B11" d="M40,72C22.4,72,8,57.6,8,40C8,22.4, 22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2 s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6, 28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 40 40" to="360 40 40" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(t,i){t.exports=e},function(e,t,i){"use strict";(function(n){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var A=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,n)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(n)},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(7),u=i(3),c=a(u),h=i(0),p=i(1),g=a(p),_=i(6),v=a(_),m=i(5),f=a(m),y=i(2),E=a(y),w=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._imaIsloading=!1,i._imaIsloaded=!1,i._imaLoadResult=!1,i._pluginIsReady=!1,i._controlsDisabled=!1,i._isLoadingContent=!1,i}return s(t,e),l(t,[{key:"name",get:function(){return"intowow-preroll-plugin"}},{key:"attributes",get:function(){return{class:this.name,"data-preroll":""}}},{key:"cfg",get:function(){return this.options.intowowPrerollPlugin||{}}}]),l(t,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,d.Events.MEDIACONTROL_CONTAINERCHANGED,this._onMediaControlContainerChanged),this.listenTo(this.core,d.Events.CORE_READY,this._onCoreReady),d.Mediator.on(this.core.options.playerId+":"+d.Events.PLAYER_RESIZE,this._onPlayerResize,this)}},{key:"_onMediaControlContainerChanged",value:function(){this.core.mediaControl.container.$el.append(this.el)}},{key:"_onCoreReady",value:function(){this._resetMaxDurationTimer(),this._resetNonLinearTimer(),this._resetPlugin(),this._configure(),this._loadImaSDK(),this._initPlugin()}},{key:"_onPlayerResize",value:function(e){this._adsManager&&this._adsManager.resize(this._contentElement.offsetWidth,this._contentElement.offsetHeight,google.ima.ViewMode.NORMAL)}},{key:"_pluginError",value:function(e){var t=new Error(this.name+": "+e);throw this._imaEvent("error",t),t}},{key:"_configure",value:function(){this._placement=this.cfg.placement||!1,this._passbackAdTagUrl=this.cfg.passbackAdTagUrl,this._autostart=!1,this._events=d.$.isPlainObject(this.cfg.events)?this.cfg.events:{},this._vpaid=2,this._nonLinearDuration=this.cfg.nonLinearDuration>0?this.cfg.nonLinearDuration:15e3,this._imaLoadtimeout=this.cfg.imaLoadTimeout>0?this.cfg.imaLoadTimeout:6e3,this._usePosterIcon=!!this.cfg.usePosterIcon,this._maxDuration=this.cfg.maxDuration>0&&this.cfg.maxDuration,this._locale=!!this.cfg.locale&&this.cfg.locale,this._disableLoader=!!this.cfg.disableLoader&&this.cfg.disableLoader}},{key:"_resetPlugin",value:function(){this._playVideoContentRequested=!1}},{key:"_loadImaSDK",value:function(){var e=this;this._imaIsloading||this._imaIsloaded||!this._placement||(this._imaIsloading=!0,(0,g.default)(function(t){e._imaLoadResult=t,e._imaIsloading=!1,e._imaIsloaded=!0,e._initImaSDK()},!0,this._imaLoadtimeout))}},{key:"_disableControls",value:function(){this.core.disableMediaControl(),this._posterPlugin&&this._posterPlugin.disable(),this._clickToPausePlugin&&this._clickToPausePlugin.disable(),this._container.stopListening(),this._controlsDisabled=!0}},{key:"_enableControls",value:function(){this._controlsDisabled&&(this._clickToPausePlugin&&this._clickToPausePlugin.enable(),this._posterPlugin&&this._posterPlugin.enable(),this.core.enableMediaControl(),this._controlsDisabled=!1)}},{key:"_initPlugin",value:function(){var e=this;if(this._pluginIsReady=!1,this._isLoadingContent)return this._isLoadingContent=!1,void this.$el.hide();if(this._cleanup(),this._playback=this.core.getCurrentPlayback(),this._playback||this._pluginError("failed to get Clappr playback"),this._container=this.core.getCurrentContainer(),this._container||this._pluginError("failed to get Clappr current container"),!this._placement)return void(!this.options.autoPlay&&this._autostart&&this._container.play());if(("video"===this._playback.tagName||!d.Browser.isMobile)&&"no_op"!==this._playback.name){if(this.$el.show(),this._$clickOverlay.show(),this._posterPlugin=this._container.getPlugin("poster"),this._posterPlugin&&this._usePosterIcon){var t=this._posterPlugin.$el.find("svg");t[0]&&(this._playSvg=t[0])}this._clickToPausePlugin=this._container.getPlugin("click_to_pause"),n.nextTick(function(){return e._disableControls()}),this._errorScreenPlugin=this.core.getPlugin("error_screen"),this._errorScreenPlugin&&this._errorScreenPlugin.disable(),this._contentElement=this._playback.el,this._useDummyMp4Video=!1,this._useBlackSvgPixel=!1;var i=this._playback.el&&this._playback.el.src;i&&0!==i.length?"html5_video"!==this._playback.name||this._playback.el.hasAttribute("poster")||(this._playback.el.poster=h.svg,this._useBlackSvgPixel=!0):(this._playback.el.src=h.mp4,this._useDummyMp4Video=!0),this._pluginIsReady=!0,this._initImaSDK()}}},{key:"_createImaContainer",value:function(){this._destroyImaContainer(),this._adContainer&&(this._imaContainer=(0,d.$)("<div />").addClass("ima-container").attr("data-preroll","")[0],this._adContainer.appendChild(this._imaContainer))}},{key:"_destroyImaContainer",value:function(){this._imaContainer&&this._adContainer&&(this._adContainer.removeChild(this._imaContainer),delete this._imaContainer)}},{key:"_createAdDisplayContainer",value:function(){this._createImaContainer(),this._destroyAdDisplayContainer(),this._adDisplayContainer=new google.ima.AdDisplayContainer(this._imaContainer,this._contentElement)}},{key:"_destroyAdDisplayContainer",value:function(){this._adDisplayContainer&&(this._adDisplayContainer.destroy(),delete this._adDisplayContainer)}},{key:"_vpaidMode",value:function(){return 0===this._vpaid?google.ima.ImaSdkSettings.VpaidMode.DISABLED:this._vpaid>1?google.ima.ImaSdkSettings.VpaidMode.INSECURE:google.ima.ImaSdkSettings.VpaidMode.ENABLED}},{key:"_initImaSDK",value:function(){if(this._imaIsloaded&&this._pluginIsReady){if(!this._imaLoadResult)return this._imaEvent("error",new Error("Failed to load IMA SDK")),void this._playVideoContent();google.ima.settings.setVpaidMode(this._vpaidMode()),this._locale&&google.ima.settings.setLocale(this._locale),this._setupOverlay()}}},{key:"_destroyAdsLoader",value:function(){this._adsLoader&&(this._adsLoader.contentComplete(),this._adsLoader.destroy(),delete this._adsLoader)}},{key:"_loadIMARequest",value:function(e){var t=this;return new Promise(function(i,n){t._destroyAdsLoader(),t._adsLoader=new google.ima.AdsLoader(t._adDisplayContainer),t._adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),t._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){i(e)}),t._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){var t=new Error;t.event=e,n(t)}),e.linearAdSlotWidth=t._contentElement.offsetWidth,e.linearAdSlotHeight=t._contentElement.offsetHeight,e.nonLinearAdSlotWidth=t._contentElement.offsetWidth,e.nonLinearAdSlotHeight=t._contentElement.offsetHeight,e.setAdWillAutoPlay(!0),e.setAdWillPlayMuted(!1),t._adsLoader.requestAds(e)})}},{key:"_destroyAdsManager",value:function(){this._adsManager&&(this._adsManager.destroy(),delete this._adsManager)}},{key:"_requestAd",value:function(){var e=this,t=function(t){var i=new google.ima.AdsRequest;return i.adTagUrl=t.adTagUrl,i.adsResponse=t.adsResponse,e._loadIMARequest(i).then(function(i){e._onAdsManagerLoaded(i,t.eventListener)},function(t){var i=t.event;throw e._imaEvent("ad_error",i),t})};window.intowow.cmd.push(function(){new Promise(function(i,n){i(window.intowow.load({placement:e._placement,timeout:e._imaLoadtimeout,source:e.core.options.source,render:t}))}).catch(function(i){if(e._passbackAdTagUrl)return t({adTagUrl:e._passbackAdTagUrl,eventListener:{emit:function(){}}});throw i}).then(null,function(){e._playVideoContent()})})}},{key:"_emitVideoEvent",value:function(e){var t=e.event,i=e.percentage,n=e.adDuration;e.eventListener.emit(t,{duration:n*i/100,adDuration:n,percentage:i})}},{key:"_createWidgets",value:function(){var e=this;if(null===this._adsManager.getCurrentAd().getApiFramework()&&-1===navigator.userAgent.indexOf("Mobi")){var t=[{destroy:function(){this.view.parentElement.removeChild(this.view),this.view.removeEventListener(),delete this.view},getView:function(){return this.view=document.createElement("div"),Object.assign(this.view.style,{height:"20px",width:"20px",position:"absolute",right:0,top:0,margin:"15px 35px",fontSize:"16px",lineHeight:"12pt",color:"white"}),this.view.innerText="00:00",this.view},update:function(e){var t=e.time,i=(e.volume,isNaN(t)?0:Math.max(0,t)),n=""+Math.floor(i/60);1===n.length&&(n="0"+n);var a=""+Math.floor(i%60);1===a.length&&(a="0"+a),this.view.innerText=n+":"+a}}];this._intowowWidgets=t;var i=this.$el[0],n=!0,a=!1,o=void 0;try{for(var r,s=this._intowowWidgets[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var A=r.value;i.appendChild(A.getView())}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}this._widgetTimer=setInterval(function(){var i={time:e._adsManager.getRemainingTime(),volume:e._adsManager.getVolume()},n=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)r.value.update(i)}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}},200);var l=document.createElement("div"),d=document.createElement("img");d.src=E.default,Object.assign(d.style,{width:"20px",height:"20px",position:"absolute",right:"0",top:"0"}),l.appendChild(d),i.appendChild(l)}}},{key:"_destroyWidgets",value:function(){if(this._intowowWidgets){clearInterval(this._widgetTimer);var e=!0,t=!1,i=void 0;try{for(var n,a=this._intowowWidgets[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){n.value.destroy()}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}delete this._intowowWidgets}}},{key:"_onAdError",value:function(e){console.error(e)}},{key:"_onAdsManagerLoaded",value:function(e,t){var i=this,n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!1,this._destroyAdsManager(),this._adsManager=e.getAdsManager(this._contentElement,n);var a=0;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){i._onAdError(e)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){i._destroyWidgets(),i._imaEvent("content_resume_requested"),i._playVideoContent()}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){i._imaEvent("content_pause_requested")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(){i._imaEvent("loaded")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,function(){var e=a-1e3*i._adsManager.getRemainingTime();i._emitVideoEvent({event:"click",percentage:Math.ceil(e/a*100),adDuration:a,eventListener:t}),i._imaEvent("click")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(){a=a||Math.floor(1e3*i._adsManager.getRemainingTime()),t.emit("impression"),i._imaEvent("impression")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){i._adsManager.setVolume(.5),i._createWidgets(),a=a||Math.floor(1e3*i._adsManager.getRemainingTime()),e.getAd().isLinear()?i._maxDuration&&i._startMaxDurationTimer():i._startNonLinearDurationTimer(),i._emitVideoEvent({event:"video_view",percentage:0,adDuration:a,eventListener:t}),i._imaEvent("started")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){i._emitVideoEvent({event:"video_view",percentage:25,adDuration:a,eventListener:t}),i._imaEvent("first_quartile")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){i._emitVideoEvent({event:"video_view",percentage:50,adDuration:a,eventListener:t}),i._imaEvent("midpoint")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){i._emitVideoEvent({event:"video_view",percentage:75,adDuration:a,eventListener:t}),i._imaEvent("third_quartile")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){i._emitVideoEvent({event:"video_view",percentage:100,adDuration:a,eventListener:t}),i._imaEvent("complete")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(){i._imaEvent("paused")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,function(){i._imaEvent("resumed")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(){var e=a-1e3*i._adsManager.getRemainingTime();i._emitVideoEvent({event:"skip",percentage:Math.ceil(e/a*100),adDuration:a,eventListener:t}),i._imaEvent("skipped")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,function(){i._imaEvent("user_close")});var o;this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,function(){var e=i._adsManager.getVolume()>0?"mute":"unmute";if(o!==e){var n=a-1e3*i._adsManager.getRemainingTime();i._emitVideoEvent({event:e,percentage:Math.ceil(n/a*100),adDuration:a,eventListener:t}),o=e}i._imaEvent("user_close")}),this._playAds()}},{key:"_onDurationTimeout",value:function(){this._imaEvent("error",new Error("Maximum duration of "+this._maxDuration+" ms reached")),this._adsManager?this._adsManager.stop():(this._cleanup(),this._playVideoContent())}},{key:"_startMaxDurationTimer",value:function(){var e=this;this._maxDurationTimer=setTimeout(function(){e._onDurationTimeout()},this._maxDuration)}},{key:"_resetMaxDurationTimer",value:function(){"number"==typeof this._maxDurationTimer&&(clearTimeout(this._maxDurationTimer),this._maxDurationTimer=void 0)}},{key:"_startNonLinearDurationTimer",value:function(){var e=this;this._nonLinearTimer=setTimeout(function(){e._playVideoContent()},this._nonLinearDuration)}},{key:"_resetNonLinearTimer",value:function(){"number"==typeof this._nonLinearTimer&&(clearTimeout(this._nonLinearTimer),this._nonLinearTimer=void 0)}},{key:"_imaEvent",value:function(e,t){d.$.isFunction(this._events[e])&&this._events[e](t)}},{key:"_setupOverlay",value:function(){var e=this;if(!this._autostart){var t=function t(i){try{e._clickOverlay.removeEventListener("click",t,!1),i.preventDefault(),i.stopPropagation()}catch(e){}e._disableLoader||e._setOverlayIcon(f.default),e._playback.consent(),e._createAdDisplayContainer(),e._adDisplayContainer.initialize(),e._requestAd()};return this._setOverlayIcon(this._playSvg||v.default),void this._clickOverlay.addEventListener("click",t,!1)}this._disableLoader||this._setOverlayIcon(f.default),this._createAdDisplayContainer(),this._adDisplayContainer.initialize(),this._requestAd()}},{key:"_playAds",value:function(){try{this._$clickOverlay.hide(),this._adsManager.init(this._contentElement.offsetWidth,this._contentElement.offsetHeight,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(e){this._imaEvent("error",e),this._playVideoContent()}}},{key:"_playVideoContent",value:function(){var e=this;this._playVideoContentRequested||(this._playVideoContentRequested=!0,this._resetMaxDurationTimer(),this._resetNonLinearTimer(),this._imaEvent("content_resume"),n.nextTick(function(){e._enableControls(),e.$el.hide();var t=e.core.options.playback||{};t.recycleVideo=d.Browser.isMobile,e._isLoadingContent=!0,setTimeout(function(){e.core.configure({playback:t,sources:e.core.options.sources,autoPlay:!0})},100)}))}},{key:"_remove",value:function(){this._$adContainer&&this._$adContainer.remove(),this._$clickOverlay&&this._$clickOverlay.remove()}},{key:"render",value:function(){return this._remove(),this._$adContainer=(0,d.$)("<div />").addClass("preroll-container").attr("data-preroll",""),this._$clickOverlay=(0,d.$)("<div />").addClass("preroll-overlay").attr("data-preroll",""),this.$el.append(this._$adContainer),this.$el.append(this._$clickOverlay),this.$el.append(d.Styler.getStyleFor(c.default)),this._adContainer=this._$adContainer[0],this._clickOverlay=this._$clickOverlay[0],this}},{key:"_setOverlayIcon",value:function(e){this._$clickOverlay.find("svg")[0]?this._$clickOverlay.find("svg").replaceWith(e):this._$clickOverlay.append(e),this._$clickOverlay.find("svg path").css("fill","#fff"),this._$clickOverlay.find("svg").addClass("preroll-overlay-icon").attr("data-preroll","")}},{key:"_cleanup",value:function(){this._destroyAdsLoader(),this._destroyAdDisplayContainer(),this._destroyAdsManager(),this._destroyImaContainer(),this.$el.hide()}},{key:"destroy",value:function(){this._cleanup(),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(d.UICorePlugin);t.default=w,e.exports=t.default}).call(t,i(4))},function(e,t){function i(e,t){var i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var o=n(a);return[i].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([o]).join("\n")}return[i].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=i(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(n[o]=!0)}for(a=0;a<e.length;a++){var r=e[a];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}}])});